<div class="table-container">
  <table class="table">
    <thead class="table-thead">
      <tr>
        <th class="table-th">Nombre</th>
        <th class="table-th">Descripci√≥n</th>
        <th class="table-th">Estado</th>
        <th class="table-th">Acciones</th>
      </tr>
    </thead>
    <tbody class="table-tbody">
      <tr *ngFor="let pedido of pedidos">
        <td class="table-td">{{ pedido.nombre }}</td>
        <td class="table-td">{{ pedido.camposPedidos }}</td>
        <td class="table-td">
          <span class="badge" [class.badge-completado]="pedido.estado === 'COMPLETADO'"
                              [class.badge-pendiente]="pedido.estado === 'PENDIENTE'"
                              [class.badge-tomado]="pedido.estado === 'TOMADO'">
            {{ pedido.estado }}
          </span>
        </td>
        <td class="table-td">
          <ng-container *ngIf="pedido.estado === 'COMPLETADO'">
            <button class="btn btn-create" (click)="download.emit(pedido.id)" [disabled]="downloading"> 
          {{ downloading ? 'Descargando...' : 'Descargar' }}</button> 
          </ng-container>
          <ng-container *ngIf="auth.rolReferente() || auth.rolAdmin()">
            <button class="btn btn-delete" (click)="delete.emit(pedido.id)">Eliminar</button>
          </ng-container>
          
          <ng-container *ngIf="auth.rolSalud() || auth.rolAdmin()">
            <ng-container *ngIf="pedido.estado === 'PENDIENTE'">
              <button class="btn btn-func" (click)="take.emit(pedido.id)">Tomar</button>
            </ng-container>
            <ng-container *ngIf="pedido.estado === 'TOMADO'">
              <button class="btn btn-create" (click)="complete.emit(pedido.id)">Completar</button>
              <button class="btn btn-delete" (click)="release.emit(pedido.id)">Soltar</button>
            </ng-container>
          </ng-container>
        </td>
      </tr>
      <tr *ngIf="pedidos.length === 0">
        <td class="table-td" colspan="4">No hay pedidos cargados.</td>
      </tr>
    </tbody>
  </table>
</div>